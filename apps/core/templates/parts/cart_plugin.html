{% load static %}
<div class="fixed z-10 bottom-0 right-0 flex flex-col items-end ml-6 w-full">
    <div class=" chat-modal   mr-5 flex flex-col mb-5 shadow-lg sm:w-1/2 md:w-1/3 lg:w-1/4">
        <!-- close button -->
        <div
            class="close-chat  bg-red-500 hover:bg-red-600 text-white mb-1 w-10 flex justify-center items-center px-2 py-1 rounded self-end cursor-pointer">
            <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-x" fill="currentColor"
                xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd"
                    d="M11.854 4.146a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708-.708l7-7a.5.5 0 0 1 .708 0z" />
                <path fill-rule="evenodd"
                    d="M4.146 4.146a.5.5 0 0 0 0 .708l7 7a.5.5 0 0 0 .708-.708l-7-7a.5.5 0 0 0-.708 0z" />
            </svg>
        </div>
        <!-- admin profile -->
        <div class="flex justify-between items-center text-white p-2 bg-yellow-500 border shadow-lg mr-5 w-full">
            <div class="flex items-center">
                {% comment %} <img
                    src="https://f0.pngfuel.com/png/136/22/profile-icon-illustration-user-profile-computer-icons-girl-customer-avatar-png-clip-art-thumbnail.png"
                    alt="picture" class="rounded-full w-8 h-8 mr-1"> {% endcomment %}
                <h2 class="font-semibold tracking-wider">Cesta de compra</h2>
            </div>

        </div>
        <!-- chats -->
        <div class="flex flex-col bg-gray-200 px-2 chat-services  overflow-auto">


            <div class="p-8 space-y-4" id="cartapp">
                <div class="flow-root" v-if="products.length > 0"  >

                    <ul class="-my-4 divide-y divide-gray-100"  v-for="product in products">
                        <li class="flex items-center py-4"  >
                            <a href="" class="flex-shrink-0">
                                <img :src="product.thumbnail"
                                    alt="" class="object-cover w-16 h-16 rounded" />
                            </a>

                            <div class="flex-1 ml-3">
                                <a href="" class="block text-sm font-medium">
                                   [[product.title]]
                                </a>

                                <p class="text-xs text-gray-500">
                                    Size: S
                                </p>
                            </div>
                            
                                <button @click="decrementQuantity(product.id, product.quantity, product.price)">
                                    <svg class="fill-current text-gray-600 w-3" viewBox="0 0 448 512">
                                        <path
                                        d="M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z" />
                                    </svg>
                                </button>

                                <span class="mx-2 border text-center w-8" >[[product.quantity]]</span>
                                <button @click="incrementQuantity(product.id, product.quantity, product.price)">
                                    <svg class="fill-current text-gray-600 w-3" viewBox="0 0 448 512">
                                        <path
                                        d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z" />
                                    </svg>
                                </button>
                            <div class="flex items-center ml-3">
                                
                                <p class="text-xs font-medium">
                                   S/ [[product.price]]
                                </p>

                                <a href=""
                                    class="flex-shrink-0 inline-block p-2 ml-3 text-gray-600 bg-gray-100 rounded-full">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                        stroke="currentColor" class="w-4 h-4">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16">
                                        </path>
                                    </svg>
                                </a>
                            </div>
                        </li>


                    </ul>
                </div>

                <div class="flex pt-4 space-x-4 border-t border-gray-100">
                    <a href=""
                        class="inline-block px-5 py-3 text-xs font-medium tracking-wide text-center text-gray-700 uppercase bg-gray-100 rounded">
                        Empty
                    </a>

                    <a href=""
                        class="flex-1 inline-block px-5 py-3 text-xs font-medium tracking-wide text-center text-white uppercase bg-yellow-600 rounded">
                        Checkout
                    </a>
                </div>
            </div>

        </div>
        <!-- send message -->

    </div>
    <div class="show-chat   ">
        <div class="bg-amber-300 mx-10 mb-6 mt-4  p-4  justify-center items-center cursor-pointer rounded-full"><svg
                xmlns="http://www.w3.org/2000/svg" class="h-8  w-8 " viewBox="0 0 24 24" width="24" height="24"
                style="fill: rgba(0, 0, 0, 1);transform: ;msFilter:;">
                <path
                    d="M21 4H2v2h2.3l3.28 9a3 3 0 0 0 2.82 2H19v-2h-8.6a1 1 0 0 1-.94-.66L9 13h9.28a2 2 0 0 0 1.92-1.45L22 5.27A1 1 0 0 0 21.27 4 .84.84 0 0 0 21 4zm-2.75 7h-10L6.43 6h13.24z">
                </path>
                <circle cx="10.5" cy="19.5" r="1.5"></circle>
                <circle cx="16.5" cy="19.5" r="1.5"></circle>
            </svg></div>


    </div>
</div>




{% block scripts %}
<script>
    const chatModal = document.querySelector('.chat-modal');
    const chatServices = document.querySelector('.chat-services');

    const showChat = document.querySelector('.show-chat');
    const closeChat = document.querySelector('.close-chat');



    showChat.addEventListener('click', function () {
        chatModal.classList.add('show')
        showChat.classList.add('hidden')
        setTimeout(() => {
            chatServices.classList.add('expand')
        }, 500);
    });
    closeChat.addEventListener('click', function () {
        setTimeout(() => {
            showChat.classList.remove('hidden')
        }, 820);
        chatServices.classList.remove('expand')
        setTimeout(() => {
            chatModal.classList.remove('show')
        }, 500);
    });
</script>
{% endblock scripts %}